(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(38)},18:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(11),o=t.n(u),i=(t(18),t(2)),c=function(e){var n=e.name,t=e.number,a=e.nameHandler,u=e.numberHandler,o=e.submitHandler;return r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:n,onChange:a})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:t,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},l=function(e){var n=e.text,t=e.eventHandler;return r.a.createElement("div",null,"Rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.list;return r.a.createElement("ul",null,n)},s=function(e){var n=e.message,t=e.errorState;return null===n?null:r.a.createElement("div",{className:t?"error":"notification"},n)},f=t(3),d=t.n(f),v="/api/persons",b=function(){return d.a.get(v).then(function(e){return e.data})},h=function(e){return d.a.post(v,e).then(function(e){return e.data})},E=function(e){return d.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},p=function(e,n){return d.a.put("".concat(v,"/").concat(e),n).then(function(e){return e.data})},w=function(e){var n=e.id,t=e.name,a=e.number,u=e.deleteHandler;return r.a.createElement("li",null,t," ",a," ",r.a.createElement("button",{onClick:u,value:n},"poista"))},g=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),f=Object(i.a)(o,2),d=f[0],v=f[1],g=Object(a.useState)(""),j=Object(i.a)(g,2),O=j[0],k=j[1],H=Object(a.useState)(""),S=Object(i.a)(H,2),C=S[0],y=S[1],T=Object(a.useState)(null),L=Object(i.a)(T,2),x=L[0],P=L[1],B=Object(a.useState)(!1),J=Object(i.a)(B,2),N=J[0],W=J[1];console.log("render",t.length,"persons"),Object(a.useEffect)(function(){b().then(function(e){u(e)})},[]);var D=function(e){var n=e.target.value,a=t.filter(function(e){return e.id===n})[0];window.confirm("Poistetaanko ".concat(a.name,"?"))&&E(n).then(function(e){u(t.filter(function(e){return e.id!==n})),P("Poistettiin ".concat(a.name)),setTimeout(function(){P(null)},5e3)}).catch(function(e){W(!0),P("Henkil\xf6n ".concat(a.name," poisto ei onnistunut!")),setTimeout(function(){P(null),W(!1)},5e3)})};return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(s,{message:x,errorState:N}),r.a.createElement(l,{text:C,eventHandler:function(e){y(e.target.value)}}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(c,{name:d,number:O,nameHandler:function(e){v(e.target.value)},numberHandler:function(e){k(e.target.value)},submitHandler:function(e){e.preventDefault();var n={name:d,number:O};if(function(e){var n=!1;return t.forEach(function(t){var a=t.name.toLowerCase();e.toLowerCase()===a&&(n=!0)}),n}(d)){if(window.confirm("".concat(d," on jo luettelossa, korvataanko vanha numero uudella?"))){var a=t.filter(function(e){return e.name===d})[0];p(a.id,n).then(function(e){u(t.map(function(n){return n.id===a.id?e:n})),P("Korvattiin numero, uusi numero: ".concat(e.number)),setTimeout(function(){P(null)},5e3)}).catch(function(e){W(!0),P("Tietoa henkil\xf6st\xe4 ".concat(a.name," ei l\xf6ydy!")),setTimeout(function(){P(null),W(!1)},5e3)})}}else h(n).then(function(e){u(t.concat(e)),P("Lis\xe4ttiin ".concat(e.name)),setTimeout(function(){P(null)},5e3)}).catch(function(e){W(!0),P(e.response.data.error),setTimeout(function(){P(null),W(!1)},5e3)});v(""),k("")}}),r.a.createElement("h3",null,"Numerot"),r.a.createElement(m,{list:function(){var e=C.toLowerCase();return t.filter(function(n){return n.name.toLowerCase().includes(e)}).map(function(e){return r.a.createElement(w,{key:e.id,id:e.id,name:e.name,number:e.number,deleteHandler:D})})}()}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.2b848b6f.chunk.js.map